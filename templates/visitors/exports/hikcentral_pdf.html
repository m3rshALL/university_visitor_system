<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>HikCentral Status Report</title>
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            font-size: 10pt;
            color: #333;
            line-height: 1.4;
        }
        
        h1 {
            color: #17a2b8;
            font-size: 18pt;
            margin-bottom: 10px;
            border-bottom: 2px solid #17a2b8;
            padding-bottom: 5px;
        }
        
        h2 {
            color: #17a2b8;
            font-size: 14pt;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .meta {
            font-size: 9pt;
            color: #666;
            margin-bottom: 20px;
        }
        
        .server-info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #17a2b8;
            margin: 20px 0;
        }
        
        .server-info table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .server-info td {
            padding: 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .server-info td:first-child {
            font-weight: bold;
            width: 40%;
            color: #495057;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 9pt;
            font-weight: bold;
        }
        
        .status-active {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-inactive {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-box {
            text-align: center;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #fff;
        }
        
        .stat-value {
            font-size: 32pt;
            font-weight: bold;
            color: #17a2b8;
        }
        
        .stat-label {
            font-size: 9pt;
            color: #666;
            margin-top: 5px;
        }
        
        .stat-sublabel {
            font-size: 8pt;
            color: #999;
            margin-top: 2px;
        }
        
        .info-box {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .info-box strong {
            color: #0c5460;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
            font-size: 8pt;
            color: #666;
            text-align: center;
        }
        
        .error-box {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîå HikCentral Status Report</h1>
        <div class="meta">
            <strong>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ:</strong> {{ generated_at|date:"d.m.Y H:i:s" }}<br>
            <strong>–°–æ—Ç—Ä—É–¥–Ω–∏–∫:</strong> {{ generated_by }}
        </div>
    </div>
    
    {% if data.error %}
    <div class="error-box">
        <h2 style="color: #721c24; margin-top: 0;">‚ö†Ô∏è –û—à–∏–±–∫–∞</h2>
        <p>{{ data.error }}</p>
    </div>
    {% else %}
    
    <h2>üñ•Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ</h2>
    <div class="server-info">
        <table>
            <tr>
                <td>–ò–º—è —Å–µ—Ä–≤–µ—Ä–∞:</td>
                <td><strong>{{ data.server_name }}</strong></td>
            </tr>
            <tr>
                <td>URL:</td>
                <td><code>{{ data.server_url }}</code></td>
            </tr>
            <tr>
                <td>–°—Ç–∞—Ç—É—Å:</td>
                <td>
                    {% if data.is_active %}
                    <span class="status-badge status-active">‚úì –ê–∫—Ç–∏–≤–µ–Ω</span>
                    {% else %}
                    <span class="status-badge status-inactive">‚úó –ù–µ–∞–∫—Ç–∏–≤–µ–Ω</span>
                    {% endif %}
                </td>
            </tr>
        </table>
    </div>
    
    <h2>üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞</h2>
    <div class="stats-grid">
        <div class="stat-box">
            <div class="stat-value">{{ data.faces_enrolled_24h }}</div>
            <div class="stat-label">–õ–∏—Ü –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ</div>
            <div class="stat-sublabel">Face enrollments</div>
        </div>
        <div class="stat-box">
            <div class="stat-value">{{ data.access_granted_24h }}</div>
            <div class="stat-label">–î–æ—Å—Ç—É–ø–æ–≤ –≤—ã–¥–∞–Ω–æ</div>
            <div class="stat-sublabel">Access assignments</div>
        </div>
        <div class="stat-box">
            <div class="stat-value">{{ data.auto_actions_24h }}</div>
            <div class="stat-label">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π</div>
            <div class="stat-sublabel">Auto check-in/out</div>
        </div>
    </div>
    
    <div class="info-box">
        <strong>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong><br>
        –î–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å HikCentral Professional.<br>
        –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞.<br>
        –î–ª—è –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å HikCentral Dashboard.
    </div>
    
    {% endif %}
    
    <div class="footer">
        <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –°–∏—Å—Ç–µ–º–æ–π –ü—Ä–æ–ø—É—Å–∫–æ–≤ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞</p>
        <p>HikCentral Professional Integration Status Report</p>
    </div>
</body>
</html>

