# Конфигурация безопасности для HikVision tasks
# Критически важно для предотвращения падения HCP сервера

# =============================================================================
# ЛИМИТЫ БЕЗОПАСНОСТИ - НЕ ИЗМЕНЯТЬ БЕЗ АНАЛИЗА ПРОИЗВОДИТЕЛЬНОСТИ!
# =============================================================================

# Максимальный размер изображения (5MB)
MAX_IMAGE_SIZE_BYTES = 5 * 1024 * 1024

# Максимальное количество гостей в batch операции
MAX_BATCH_SIZE = 100

# Максимальное количество визитов для одновременного мониторинга
MAX_CONCURRENT_MONITORING = 50

# Минимальный интервал между проверками одного визита (секунды)
MONITORING_RATE_LIMIT_SECONDS = 60

# Максимальное количество событий за один запрос
MAX_DOOR_EVENTS_PER_REQUEST = 100

# Timeout для долгих операций (секунды)
OPERATION_TIMEOUT_SECONDS = 300

# Максимальная длина лога (символы)
MAX_LOG_LENGTH = 500

# Лимиты системных ресурсов
DISK_USAGE_THRESHOLD = 90  # % заполнения диска
MEMORY_USAGE_THRESHOLD = 80  # % использования памяти

# Поддерживаемые форматы изображений
ALLOWED_IMAGE_FORMATS = {'JPEG', 'JPG', 'PNG', 'BMP'}

# Кэш для предотвращения повторных проверок
MONITORING_CACHE_TTL_SECONDS = 30

# =============================================================================
# НАСТРОЙКИ ЛОГИРОВАНИЯ
# =============================================================================

# Уровни логирования для разных операций
LOG_LEVELS = {
    'enroll_face': 'WARNING',  # Только ошибки и предупреждения
    'monitor_passages': 'ERROR',  # Только критические ошибки
    'batch_operations': 'INFO',  # Основная информация
    'access_management': 'WARNING'
}

# Отключить подробное логирование для production
VERBOSE_LOGGING = False

# =============================================================================
# ЗАЩИТА ОТ ПЕРЕГРУЗКИ
# =============================================================================

# Проверка системных ресурсов перед выполнением задач
ENABLE_RESOURCE_MONITORING = True

# Максимальное количество одновременно выполняющихся задач
MAX_CONCURRENT_TASKS = {
    'enroll_face': 10,
    'batch_enroll': 2,
    'monitoring': 1,
    'access_management': 5
}

# Автоматическая деградация при высокой нагрузке
ENABLE_GRACEFUL_DEGRADATION = True