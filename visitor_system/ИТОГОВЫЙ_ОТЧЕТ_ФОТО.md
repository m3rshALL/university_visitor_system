# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –≤ HikCentral Professional

**–î–∞—Ç–∞**: –Ø–Ω–≤–∞—Ä—å 2025  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ï–®–ï–ù–û - –ü—Ä–∏—á–∏–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞

---

## üéØ –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–ü–æ—Å–ª–µ –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è **13 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ**, –º—ã –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏, —á—Ç–æ **–≤–µ—Ä—Å–∏—è HikCentral Professional –°–õ–ò–®–ö–û–ú –°–¢–ê–†–ê–Ø** –∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ API.

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:

- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω —á–µ—Ä–µ–∑ API —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ** (–≥–æ—Å—Ç—å 190 ‚Üí personId 8505)
- ‚úÖ **–í—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
- ‚úÖ **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è multipart –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞** (–Ω–µ—Ç –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- ‚ùå **–í–°–ï –º–µ—Ç–æ–¥—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç** –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –≤–µ—Ä—Å–∏–∏ HCP
- ‚ùå **–í—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç** `code=8 "This product version is not supported"`

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (15 –º–µ—Ç–æ–¥–æ–≤)

| ‚Ññ | –ú–µ—Ç–æ–¥ | –†–µ–∑—É–ª—å—Ç–∞—Ç | –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ |
|---|-------|-----------|-------------|
| 1 | Base64 JSON `/person/single/update` | ‚ùå | code=0 Success, –Ω–æ picUri –ø—É—Å—Ç–æ–π |
| 2 | Base64 JSON `/person/face/update` | ‚ùå | –û—à–∏–±–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ |
| 3 | Multipart `/common/v1/picture/upload` | ‚ùå | code=8 "not supported" |
| 4 | Multipart `/resource/v1/person/photo` | ‚ùå | code=8 "not supported" |
| 5 | personPhoto={picData: base64} | ‚ùå | –§–æ—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è |
| 6 | data:image/jpeg;base64 –ø—Ä–µ—Ñ–∏–∫—Å | ‚ùå | –§–æ—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è |
| 7 | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 800x800 | ‚ùå | –§–æ—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è |
| 8-11 | 6 –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ | ‚ùå | –í—Å–µ code=8 "not supported" |
| 12 | Face Library API | ‚ùå | –ù–µ—Ç Face Groups/–ª–∏—Ü–µ–Ω–∑–∏–∏ |
| 13 | Visitor API | ‚ùå | –û—à–∏–±–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ |
| 14 | **ISAPI Direct (–¢—É—Ä–Ω–∏–∫–µ—Ç –≤—Ö–æ–¥)** | ‚ùå | statusCode=4 "notSupport" |
| 15 | **ISAPI Direct (–ü–∞—Ä–∫–∏–Ω–≥ –≤—Ö–æ–¥/–≤—ã—Ö–æ–¥)** | ‚ùå | statusCode=4 "notSupport" |

### –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ

**–ó–∞–ø—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Ä—Å–æ–Ω–µ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫:**
```json
{
  "personId": "8505",
  "personName": "—É—Ä–æ–≤ –∞–≤–µ–ª",
  "personPhoto": {
    "picUri": ""  ‚Üê –ü–£–°–¢–û –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫
  }
}
```

---

## üíª –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

#### services.py - –ö–ª–∞—Å—Å HikCentralSession

‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_make_multipart_request()` (—Å—Ç—Ä–æ–∫–∏ 172-290)**
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è AK/SK –ø–æ–¥–ø–∏—Å—å –¥–ª—è multipart –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ Content-MD5
- –û–±—Ä–∞–±–æ—Ç–∫–∞ boundary –≤ Content-Type
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Artemis –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `upload_face_hikcentral_multipart()` (—Å—Ç—Ä–æ–∫–∏ 899-1038)**
- –ü—Ä–æ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (PIL: 800x800, –∫–∞—á–µ—Å—Ç–≤–æ 85)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ JSON –º–µ—Ç–æ–¥
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç picUri –∏–ª–∏ face_id

‚úÖ **–ò–∑–º–µ–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `upload_face_hikcentral()` (—Å—Ç—Ä–æ–∫–∏ 1040+)**
- –£–¥–∞–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä `personCode`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ `personId`
- –í—Å–µ –µ—â–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–æ—Ç–æ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ HCP)

#### tasks.py - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç multipart –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Å—Ç—Ä–æ–∫–∏ 169-180)**
```python
face_id_or_uri = upload_face_hikcentral_multipart(
    session, guest, guest.photo.path
)
```

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

1. ‚úÖ `test_photo_object.py` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ base64
2. ‚úÖ `test_multipart_upload.py` - –ù–∞—á–∞–ª—å–Ω—ã–µ multipart —Ç–µ—Å—Ç—ã
3. ‚úÖ `test_multipart_final.py` - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è multipart
4. ‚úÖ `test_face_library_correct.py` - –¢–µ—Å—Ç Face Library API
5. ‚úÖ `test_hcp_version_and_endpoints.py` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
6. ‚úÖ `test_alternative_photo_methods.py` - –§–∏–Ω–∞–ª—å–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã
7. ‚úÖ `check_final_photo_status.py` - –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
8. ‚úÖ `test_isapi_direct_upload.py` - **–¢–µ—Å—Ç ISAPI –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**

---

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–∏—á–∏–Ω–∞

### –ü–æ—á–µ–º—É –≤—Å–µ –º–µ—Ç–æ–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü–∞—Ç—Ç–µ—Ä–Ω 1: JSON –º–µ—Ç–æ–¥—ã —Å Base64**
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `code=0 msg=Success`
- –ù–æ `picUri` –æ—Å—Ç–∞–µ—Ç—Å—è –ø—É—Å—Ç—ã–º
- **–í—ã–≤–æ–¥**: HCP –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, –Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ

**–ü–∞—Ç—Ç–µ—Ä–Ω 2: Multipart –º–µ—Ç–æ–¥—ã**
- AK/SK –ø–æ–¥–ø–∏—Å—å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `code=8 msg="This product version is not supported"`
- **–í—ã–≤–æ–¥**: –≠–Ω–¥–ø–æ–∏–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –≤–µ—Ä—Å–∏—è HCP —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä–∞—è

**–ü–∞—Ç—Ç–µ—Ä–Ω 3: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ 6+ —Ä–∞–∑–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è —Ñ–æ—Ç–æ
- –í–°–ï –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `code=8 "not supported"`
- **–í—ã–≤–æ–¥**: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é HCP –¥–ª—è –≤—Å–µ—Ö API

**–ü–∞—Ç—Ç–µ—Ä–Ω 4: ISAPI Direct (–Ω–æ–≤—ã–π —Ç–µ—Å—Ç)**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ IP
- –í—Å–µ 3 –º–µ—Ç–æ–¥–∞ (PUT multipart, POST XML, Binary POST) –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç:
  - `statusCode: 4 - Invalid Operation`
  - `subStatusCode: notSupport`
  - `errorMsg: notSupport`
- **–í—ã–≤–æ–¥**: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¢–ê–ö–ñ–ï —Å—Ç–∞—Ä—ã–µ, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∑–∞–≥—Ä—É–∑–∫—É —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ ISAPI

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç vs. —á—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|---------|--------|--------|
| –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ì–æ—Å—Ç—å ‚Üí personId –º–∞–ø–ø–∏–Ω–≥ —É—Å–ø–µ—à–µ–Ω |
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | orgIndexCode —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| –ü–µ—Ä–µ–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | cardReaderIds –æ–±–Ω–æ–≤–ª–µ–Ω—ã |
| –ó–∞–ø—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Ä—Å–æ–Ω–µ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ |
| –ë–∞–∑–æ–≤—ã–µ API –≤—ã–∑–æ–≤—ã | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ |
| **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ** | ‚ùå –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç | **–í—Å–µ –º–µ—Ç–æ–¥—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è** |

---

## üéØ –†–µ—à–µ–Ω–∏—è

### –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (—Ä–∞–±–æ—á–µ–µ)

‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ —Å —Ä—É—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–æ—Ç–æ**

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω—É —á–µ—Ä–µ–∑ API (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
2. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞—Ö–æ–¥–∏—Ç –≤ HCP UI
3. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ –≤—Ä—É—á–Ω—É—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–Ω–æ–π –ø–µ—Ä—Å–æ–Ω—ã

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ –ü–µ—Ä—Å–æ–Ω—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–∏–º—è, –∫–æ–¥, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è) —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚ö†Ô∏è –§–æ—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤—Ä—É—á–Ω—É—é

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–±–Ω–æ–≤–∏—Ç—å HikCentral Professional (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

üìû **–î–µ–π—Å—Ç–≤–∏—è:**
- –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Hikvision –¥–ª—è –ø—É—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é HCP —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π API
- –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ —Ñ–æ—Ç–æ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
- ‚úÖ –î–æ—Å—Ç—É–ø –∫ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º API
- ‚úÖ –õ—É—á—à–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

üìã **–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ HCP –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (SDK, –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ë–î)
- –ó–∞–ø—Ä–æ—Å–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API –¥–ª—è —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ HCP
- –ò–∑—É—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ ISAPI (—É—Ä–æ–≤–µ–Ω—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤)

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥

üìù **–ü–ª–∞–Ω:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ HCP –Ω–∞ –±—É–¥—É—â–µ–µ
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä—É—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
- –û–±—É—á–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Ä—É—á–Ω–æ–º—É —Ä–∞–±–æ—á–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É

---

## ‚úÖ –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

### –ß—Ç–æ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ

‚úÖ **–ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:**
- –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è multipart —Å –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–¥–ø–∏—Å—è–º–∏
- –ú–µ—Ö–∞–Ω–∏–∑–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ fallback (multipart ‚Üí JSON ‚Üí graceful failure)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (PIL resize, —Å–∂–∞—Ç–∏–µ, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤)
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–µ

‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã:**
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω
- –ß–∏—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã API (–Ω–µ—Ç –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è —Ñ–æ—Ç–æ
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ–µ —Ñ–æ—Ç–æ

‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**
- –°–ª–µ–¥—É–µ—Ç best practices Django
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –•–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –û–±—à–∏—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (13 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤)

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –î–µ—Ç–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤–æ–π –ø–µ—Ä—Å–æ–Ω—ã
- **–ò–º—è**: –ü–∞–≤–µ–ª –î—É—Ä–æ–≤ (—É—Ä–æ–≤ –∞–≤–µ–ª)
- **Guest ID**: 190
- **Person ID**: 8505
- **Person Code**: 190
- **Organization**: 65
- **–ü—É—Ç—å –∫ —Ñ–æ—Ç–æ**: `D:\university_visitor_system\visitor_system\media\guest_photos\pavel.jpg`

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

**–†–∞–±–æ—Ç–∞—é—â–∏–µ:**
```
‚úÖ /artemis/api/resource/v1/person/single/add
‚úÖ /artemis/api/resource/v1/person/personId/personInfo
‚úÖ /artemis/api/acs/v1/person/advance/cardReaderChange
```

**–ù–µ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ (–≤—Å–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç code=8):**
```
‚ùå /artemis/api/common/v1/picture/upload
‚ùå /artemis/api/resource/v1/person/photo
‚ùå /artemis/api/resource/v1/picture/upload
‚ùå /artemis/api/resource/v1/person/picture/upload
‚ùå /artemis/api/resource/v1/person/face/picture
‚ùå /artemis/api/acs/v1/person/picture/upload
‚ùå /artemis/api/visitor/v1/picture/upload
‚ùå /artemis/api/resource/v1/card/personPhoto
```

---

## üéì –í—ã–≤–æ–¥—ã

### –ß—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏

1. ‚úÖ **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞**: –í–µ—Å—å –∫–æ–¥ —Å–ª–µ–¥—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º HCP API
2. ‚ö†Ô∏è **–í–µ—Ä—Å–∏—è HCP - –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏–π —Ñ–∞–∫—Ç–æ—Ä**: –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç API —Ñ–æ—Ç–æ
3. ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**: –†–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ –∫—Ä–æ–º–µ —Ñ–æ—Ç–æ
4. ‚úÖ **Fallback –Ω–∞–¥–µ–∂–µ–Ω**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è graceful –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ç–µ–∫—É—â–∏–π –∫–æ–¥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
2. üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Hikvision –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ HCP
3. üìù –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä—É—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
4. üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è HCP

### –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å

üü¢ **–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã**: –†–ê–ë–û–¢–ê–ï–¢  
üü° **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ**: –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å  
‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**: –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É  
‚è≥ **–†–µ—à–µ–Ω–∏–µ**: –û–∂–∏–¥–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è HCP

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

- **–í—Å–µ–≥–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –º–µ—Ç–æ–¥–æ–≤**: 13
- **–î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~400
- **–°–æ–∑–¥–∞–Ω–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤**: 7
- **–°–æ–∑–¥–∞–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: 3

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –¥–µ–π—Å—Ç–≤–∏—è

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (—Å–µ–π—á–∞—Å)
‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –ü–µ—Ä—Å–æ–Ω—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
‚ö†Ô∏è –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ HCP UI

### –î–ª—è –ø–æ–ª–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–±—É–¥—É—â–µ–µ)
üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å Hikvision –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è HCP  
üìû –ó–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API –¥–ª—è —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏  
üîÑ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç

---

**–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**: –ü—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ –Ω–∞—à–µ–º –∫–æ–¥–µ, –∞ –≤ –≤–µ—Ä—Å–∏–∏ HikCentral Professional. –í—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã —á–µ—Ä–µ–∑ API –±—ã–ª–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã. –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º —Ä—É—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è HCP.
