# –û—Ç—á–µ—Ç: –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–±–ª–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–∞—Ç–∞:** 13.10.2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ñ–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å HikCentral  
**–ú–µ—Ç–æ–¥ –∞–Ω–∞–ª–∏–∑–∞:** Sequential Thinking + Code Audit

---

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö JSON responses

**–§–∞–π–ª:** `visitor_system/hikvision_integration/services.py`

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:**
```python
553: logger.info("HikCentral: lookup personCode=%s response=%s", employee_no, lookup_json)
604: logger.info("HikCentral: person update response=%s", update_json)
627: logger.info("HikCentral: person add response=%s", add_json)
648: logger.info("HikCentral: second lookup personCode=%s response=%s", employee_no, j2)
665: logger.info("HikCentral: advance search for personCode=%s response=%s", employee_no, search_json)
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ö–∞–∂–¥—ã–π JSON response: 2-10 KB
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ 1 –≥–æ—Å—Ç—è: ~5 JSON –ª–æ–≥–æ–≤ = 25-50 KB
- –ü—Ä–∏ 100 –≥–æ—Å—Ç–µ–π/–¥–µ–Ω—å: **2.5-5 MB/–¥–µ–Ω—å** —Ç–æ–ª—å–∫–æ –Ω–∞ JSON
- –õ–æ–≥–∏ —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ 5 MB ‚Üí **—Ä–æ—Ç–∞—Ü–∏—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å**

**–ü—Ä–∏–º–µ—Ä logged JSON:**
```json
{
  "code": "0",
  "msg": "Success", 
  "data": {
    "personId": "8561",
    "personName": "Petrov Alexander",
    "personCode": "227",
    "orgIndexCode": "65",
    "phoneNo": "+77771234567",
    ... –µ—â–µ 20+ –ø–æ–ª–µ–π
  }
}
```

---

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞ —Å –º–∞—Å—Å–æ–≤—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏

**–§–∞–π–ª:** `visitor_system/visitor_system/celery.py`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
'monitor-guest-passages': {
    'task': 'hikvision_integration.tasks.monitor_guest_passages_task',
    'schedule': crontab(minute='*/5'),  # –ö–ê–ñ–î–´–ï 5 –ú–ò–ù–£–¢!
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ó–∞–¥–∞—á–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç** (288 —Ä–∞–∑/–¥–µ–Ω—å)
2. –í—ã–±–∏—Ä–∞–µ—Ç –í–°–ï –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∏–∑–∏—Ç—ã: `Visit.objects.filter(access_granted=True, access_revoked=False)`
3. –î–ª—è –ö–ê–ñ–î–û–ì–û –≤–∏–∑–∏—Ç–∞ –¥–µ–ª–∞–µ—Ç API –∑–∞–ø—Ä–æ—Å `get_door_events()` –∫ HikCentral
4. –õ–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Å—Ç—è

**–†–∞—Å—á–µ—Ç:**
- 50 –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–æ—Å—Ç–µ–π
- 288 –∑–∞–ø—É—Å–∫–æ–≤/–¥–µ–Ω—å * 50 –≥–æ—Å—Ç–µ–π = **14,400 API –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å**
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–∏–Ω–∏–º—É–º 2 –ª–æ–≥–∞
- 14,400 * 2 * 500 bytes = **14 MB/–¥–µ–Ω—å** —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç—É –∑–∞–¥–∞—á—É!

---

### ‚ö†Ô∏è –í–ê–ñ–ù–ê–Ø: DEBUG mode –≤ production

**–§–∞–π–ª:** `visitor_system/visitor_system/conf/dev.py`

```python
DEBUG = True  # ‚Üê –ü–†–û–ë–õ–ï–ú–ê!
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- Django —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –í–°–ï SQL –∑–∞–ø—Ä–æ—Å—ã –≤ –ø–∞–º—è—Ç–∏ (`connection.queries`)
- **Memory leak** –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ traceback –ª–æ–≥–∞—Ö
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —Ä–∞–±–æ—Ç–∞

---

### ‚ö†Ô∏è –í–ê–ñ–ù–ê–Ø: –ò–∑–±—ã—Ç–æ—á–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª:** `visitor_system/visitor_system/conf/base.py`

```python
'handlers': {
    'console': {
        'level': 'DEBUG',  # ‚Üê –°–ª–∏—à–∫–æ–º –ø–æ–¥—Ä–æ–±–Ω–æ
    },
},
'loggers': {
    'visitors': {
        'level': 'DEBUG',  # ‚Üê –°–ª–∏—à–∫–æ–º –ø–æ–¥—Ä–æ–±–Ω–æ
    },
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ú–ù–û–ì–û DEBUG —Å–æ–æ–±—â–µ–Ω–∏–π
- DEBUG –ª–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –í production –Ω—É–∂–µ–Ω —É—Ä–æ–≤–µ–Ω—å WARNING –∏–ª–∏ INFO

---

## ‚úÖ –ß–¢–û –í –ü–û–†–Ø–î–ö–ï (–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

### Credentials –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è ‚úì

–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ grep:
```bash
grep "logger.*password|logger.*secret|logger.*token" services.py
# Result: No matches found
```

### Base64 —Ñ–æ—Ç–æ –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è ‚úì

```python
# services.py:960
logger.info("HikCentral: Sending payload with personId=%s, faceData length=%d chars", ...)
#                                                            ^^^^^^^^ –¢–æ–ª—å–∫–æ –¥–ª–∏–Ω–∞!
```

### –¢–æ–∫–µ–Ω—ã –∏ –ø–æ–¥–ø–∏—Å–∏ –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è ‚úì

–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ - –Ω–∏–≥–¥–µ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- `integration_key` ‚úì
- `integration_secret` ‚úì
- `X-Ca-Signature` ‚úì
- Access tokens ‚úì

---

## üìä –û—Ü–µ–Ω–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–æ–≤

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (–ø—Ä–∏ 50 –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–æ—Å—Ç—è—Ö):

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –†–∞–∑–º–µ—Ä/–¥–µ–Ω—å | –ü—Ä–∏—á–∏–Ω–∞ |
|----------|-------------|---------|
| **JSON responses** | 2-5 MB | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö response |
| **monitor_guest_passages** | 14 MB | 14,400 –∑–∞–ø—Ä–æ—Å–æ–≤ * 2 –ª–æ–≥–∞ |
| **–°–æ–∑–¥–∞–Ω–∏–µ –≥–æ—Å—Ç–µ–π** | 5 MB | 100 –≥–æ—Å—Ç–µ–π * 50 KB |
| **–î—Ä—É–≥–∏–µ –ª–æ–≥–∏** | 10 MB | Django, Celery, errors |
| **–ò–¢–û–ì–û** | **31-34 MB/–¥–µ–Ω—å** | **–ü—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏ 5MB = 6-7 —Ä–æ—Ç–∞—Ü–∏–π/–¥–µ–Ω—å!** |

### –ü—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤:

```
maxBytes: 5 MB
backupCount: 5

–ò—Ç–æ–≥–æ —Ñ–∞–π–ª–æ–≤: 6 (1 –∞–∫—Ç–∏–≤–Ω—ã–π + 5 backup)
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 30 MB

–ü—Ä–∏ 34 MB/–¥–µ–Ω—å ‚Üí –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞ ~21 —á–∞—Å
```

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

### ‚úÖ –ß—Ç–æ –∑–∞—â–∏—â–µ–Ω–æ:

1. **Credentials** - –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è ‚úì
2. **–¢–æ–∫–µ–Ω—ã/–ø–æ–¥–ø–∏—Å–∏** - –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è ‚úì
3. **Base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è (—Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω–∞) ‚úì
4. **–ü–∞—Ä–æ–ª–∏** - –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è ‚úì

### ‚ö†Ô∏è –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ):

1. **–ò–º–µ–Ω–∞ –≥–æ—Å—Ç–µ–π** - –≤ JSON responses
2. **–ö–æ–¥—ã –ø–µ—Ä—Å–æ–Ω** - –≤ JSON responses
3. **–¢–µ–ª–µ—Ñ–æ–Ω—ã** - –≤ JSON responses (–µ—Å–ª–∏ –µ—Å—Ç—å)
4. **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏** - –≤ JSON responses

**GDPR —Ä–∏—Å–∫:** –°–†–ï–î–ù–ò–ô  
–õ–æ–≥–∏—Ä—É—é—Ç—Å—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ credentials.

---

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

### 1. –£–±—Ä–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö JSON response

**services.py - –ò—Å–ø—Ä–∞–≤–∏—Ç—å:**

```python
# –ë–´–õ–û:
logger.info("HikCentral: person add response=%s", add_json)

# –°–¢–ê–õ–û:
logger.info("HikCentral: person add response code=%s msg=%s", 
           add_json.get('code'), add_json.get('msg'))

# –ü–æ–ª–Ω—ã–π response —Ç–æ–ª—å–∫–æ –≤ DEBUG:
if settings.DEBUG:
    logger.debug("HikCentral: Full response: %s", add_json)
```

**–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ —Å—Ç—Ä–æ–∫–∞–º:** 553, 604, 627, 648, 665

---

### 2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å monitor_guest_passages

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª**
```python
# celery.py
'schedule': crontab(minute='*/10'),  # –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 5
```
**–í—ã–∏–≥—Ä—ã—à:** -50% –∑–∞–ø—Ä–æ—Å–æ–≤ = -7 MB/–¥–µ–Ω—å

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤**
```python
# –í–º–µ—Å—Ç–æ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Å—Ç—è - –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –≤—Å–µ—Ö
events_data = get_door_events(
    hc_session,
    person_id=None,  # –í—Å–µ –≥–æ—Å—Ç–∏
    start_time=start_time.isoformat(),
    end_time=now.isoformat(),
)
# –ó–∞—Ç–µ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –ø–æ person_id –≤ –∫–æ–¥–µ
```
**–í—ã–∏–≥—Ä—ã—à:** -99% –∑–∞–ø—Ä–æ—Å–æ–≤ = -14 MB/–¥–µ–Ω—å

---

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Production —Ä–µ–∂–∏–º

**–°–æ–∑–¥–∞—Ç—å `.env` —Ñ–∞–π–ª:**
```bash
DJANGO_DEBUG=False
DJANGO_LOG_LEVEL=WARNING
```

**–û–±–Ω–æ–≤–∏—Ç—å base.py:**
```python
DEBUG = os.getenv('DJANGO_DEBUG', 'False').lower() == 'true'

LOG_LEVEL = os.getenv('DJANGO_LOG_LEVEL', 'INFO')

LOGGING = {
    'loggers': {
        '': {
            'level': LOG_LEVEL,  # WARNING –≤ production
        },
        'visitors': {
            'level': LOG_LEVEL,  # WARNING –≤ production
        },
    }
}
```

---

### 4. PostgreSQL - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL:**
```bash
docker exec -it <postgres_container> psql -U postgres -d visitor_system_db
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```sql
SHOW log_statement;          -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 'none' –∏–ª–∏ 'ddl'
SHOW log_min_duration_statement;  -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å -1 –∏–ª–∏ 1000+
SHOW logging_collector;      -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 'off' –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è
```

**–ï—Å–ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ - –æ—Ç–∫–ª—é—á–∏—Ç—å:**
```sql
ALTER SYSTEM SET log_statement = 'none';
ALTER SYSTEM SET log_min_duration_statement = -1;
SELECT pg_reload_conf();
```

---

### 5. –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥-—Ñ–∞–π–ª–æ–≤

**base.py:**
```python
'file': {
    'maxBytes': 1024 * 1024 * 50,  # 50 MB –≤–º–µ—Å—Ç–æ 5 MB
    'backupCount': 10,              # 10 —Ñ–∞–π–ª–æ–≤ –≤–º–µ—Å—Ç–æ 5
    # –ò—Ç–æ–≥–æ: 550 MB –≤–º–µ—Å—Ç–æ 30 MB
}
```

---

### 6. –î–æ–±–∞–≤–∏—Ç—å —Å–∂–∞—Ç–∏–µ –ª–æ–≥–æ–≤

**base.py - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RotatingFileHandler —Å gzip:**
```python
import gzip
import shutil

class CompressedRotatingFileHandler(RotatingFileHandler):
    def doRollover(self):
        super().doRollover()
        # –°–∂–∏–º–∞–µ–º —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏
        for i in range(1, self.backupCount + 1):
            name = f"{self.baseFilename}.{i}"
            if os.path.exists(name):
                with open(name, 'rb') as f_in:
                    with gzip.open(f"{name}.gz", 'wb') as f_out:
                        shutil.copyfileobj(f_in, f_out)
                os.remove(name)
```

**–í—ã–∏–≥—Ä—ã—à:** 70-80% —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞

---

## üìà –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | –≠–∫–æ–Ω–æ–º–∏—è/–¥–µ–Ω—å | –ù–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è |
|-------------|---------------|-------------|
| –£–±—Ä–∞—Ç—å JSON response –ª–æ–≥–∏ | -7 MB | 7 MB |
| –ë–∞—Ç—á–∏–Ω–≥ monitor_guest_passages | -14 MB | 21 MB |
| WARNING level | -5 MB | 26 MB |
| **–ò–¢–û–ì–û –¥–æ** | **34 MB/–¥–µ–Ω—å** | |
| **–ò–¢–û–ì–û –ø–æ—Å–ª–µ** | **~8 MB/–¥–µ–Ω—å** | **-76%** |

### –° —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ (50MB * 10):

```
–†–∞–∑–º–µ—Ä –¥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è: 550 MB
–°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è: 8 MB/–¥–µ–Ω—å
–î–Ω–µ–π –¥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è: ~69 –¥–Ω–µ–π (–≤–º–µ—Å—Ç–æ <1 –¥–Ω—è)
```

---

## ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –£—è–∑–≤–∏–º–æ—Å—Ç–∏: –ù–ï–¢ ‚úì

- ‚ùå SQL Injection - –∑–∞—â–∏—â–µ–Ω Django ORM
- ‚ùå Credentials leak - –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- ‚ùå Token leak - –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è  
- ‚ùå Sensitive data –≤ –ª–æ–≥–∞—Ö - —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

### GDPR Compliance: ‚ö†Ô∏è –°–†–ï–î–ù–ò–ô

- ‚úÖ Credentials –∑–∞—â–∏—â–µ–Ω—ã
- ‚ö†Ô∏è –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–≥–∞—Ö (–∏–º–µ–Ω–∞, –∫–æ–¥—ã)
- üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –¥–æ–±–∞–≤–∏—Ç—å data retention policy (—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π)

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (—Å–µ–≥–æ–¥–Ω—è):

1. ‚úÖ –£–±—Ä–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö JSON response
2. ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª monitor_guest_passages –¥–æ 10 –º–∏–Ω—É—Ç
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å WARNING level –¥–ª—è production

### –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ:

4. ‚ö° –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL logging
5. ‚ö° –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ –¥–æ 50MB
6. ‚ö° –î–æ–±–∞–≤–∏—Ç—å —Å–∂–∞—Ç–∏–µ –ª–æ–≥–æ–≤

### –í —Å–ª–µ–¥—É—é—â–µ–º –º–µ—Å—è—Ü–µ:

7. üìä –ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ monitor_guest_passages
8. üìä Data retention policy –¥–ª—è –ª–æ–≥–æ–≤
9. üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–æ–≤ (Prometheus/Grafana)

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:

- ‚ùå **–õ–æ–≥–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç –¥–∏—Å–∫** - 34 MB/–¥–µ–Ω—å –ø—Ä–∏ –ª–∏–º–∏—Ç–µ 30 MB
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ –ø–æ—Ä—è–¥–∫–µ** - credentials –Ω–µ —É—Ç–µ–∫–∞—é—Ç
- ‚ö†Ô∏è **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è** - GDPR —Ä–∏—Å–∫

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

- ‚úÖ **–õ–æ–≥–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** - 8 MB/–¥–µ–Ω—å (-76%)
- ‚úÖ **–î–∏—Å–∫ –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è** - 69 –¥–Ω–µ–π –¥–æ –ª–∏–º–∏—Ç–∞
- ‚úÖ **Production ready** - WARNING level, no DEBUG

**–°—Ç–∞—Ç—É—Å:** –ö–æ–¥ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 13.10.2025  
**–ú–µ—Ç–æ–¥:** Sequential Thinking Analysis

